/*! Bootstrap Filestyle - v0.1.0 - 2012-10-17
* http://markusslima.github.com/bootstrap-filestyle/
* Copyright (c) 2012 Markus Lima; Licensed MIT */

(function ($) {
    "use strict";
    // Register plugin
    $.fn.filestyle = function (options) {
		if (typeof options === 'object' || typeof options === 'undefined'){
			var defaults = {
					buttonText : 'Choose file',
					textField : true,
					icon : true,
					classButton : '',
					classText : '',
					classIcon : 'icon-folder-open'
				};

			options = $.extend(defaults, options);

			return this.each(function () {
				var $this = $(this);

				$this.data('filestyle', true);

				$this
					.css({'position':'fixed','top':'-100px','left':'-100px'})
					.parent()
					.addClass("form-search")
					.append(
					(options.textField ? '<input style="display: none" type="text" id="file_text" class="browseinput" disabled size="20" /> ' : '')+
						'<button type="button" class="btn '+options.classButton+'" >'+
							(options.icon ? '<i class="icon-folder-open"></i> ' : '')+
							options.buttonText+
						'</button>'
					);

				$this.change(function () {
					$this.parent().children(':text').val($(this).val());
				});

				
				// Add event click
				$this.parent().children(':button').click(function () {
					$this.click();
				});
			});
		} else {
			return this.each(function () {
				var $this = $(this);
				if ($this.data('filestyle') === true && options === 'clear') {
					$this.parent().children(':text').val('');
					$this.val('');
				} else {
					window.console.error('Method filestyle not defined!');
				}
			});
		}
    };
}(jQuery));

